<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Processing Agreement - {{1.company}}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
            background-color: #ffffff;
        }
        h1 {
            color: #0069d9;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            text-align: center;
        }
        h2 {
            color: #0069d9;
            margin-top: 25px;
        }
        .section { margin-bottom: 30px; }
        ul { margin: 15px 0; padding-left: 25px; }
        li { margin-bottom: 8px; }
        .download-section {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f8fdff, #e8f4fc);
            border-radius: 10px;
            border: 1px solid #92cdec;
        }
        .download-btn {
            background: linear-gradient(135deg, #0069d9, #92cdec);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
        }
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(146, 205, 236, 0.4);
        }
        .download-instructions {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
        }
        .document-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #92cdec;
        }
        .company-name { font-size: 24px; font-weight: bold; color: #0069d9; }
        .document-date { color: #666; font-size: 14px; margin-top: 10px; }
        .signature-area {
            margin-top: 50px;
            border-top: 2px solid #92cdec;
            padding-top: 30px;
        }
        .signature-line {
            border-bottom: 1px solid #333;
            width: 250px;
            display: inline-block;
            margin: 10px 0;
        }
        @media print {
            .download-section { display: none !important; }
            body { padding: 0; margin: 0; }
            .section { page-break-inside: avoid; }
            @page { margin: 2cm; }
        }
    </style>
</head>
<body>
    <div class="download-section">
        <button class="download-btn" onclick="window.print()">ðŸ“„ Download as PDF</button>
        <p class="download-instructions">Click the button above, then select <strong>"Save as PDF"</strong> as your printer.</p>
    </div>

    <div class="document-header">
        <div class="company-name">{{1.company}}</div>
        <div class="document-date">Generated: {{formatDate(now; "MMMM D, YYYY")}}</div>
    </div>

    <h1>GDPR Data Processing Agreement</h1>

    <div class="section">
        <h2>1. Parties</h2>
        <p>This Data Processing Agreement ("Agreement") is entered into between:</p>
        <p><strong>Data Controller:</strong> {{1.company}}</p>
        <p><strong>Address:</strong> {{1.company_address}}</p>
        <p>AND</p>
        <p><strong>Data Processor:</strong> {{1.service_provider_name}}</p>
        <p><strong>Effective Date:</strong> {{formatDate(now; "MMMM D, YYYY")}}</p>
    </div>

    <div class="section">
        <h2>2. Background</h2>
        <p>This Agreement sets out the terms and conditions under which the Data Processor will process Personal Data on behalf of the Data Controller in compliance with the General Data Protection Regulation (GDPR).</p>
    </div>

    <div class="section">
        <h2>3. Definitions</h2>
        <ul>
            <li><strong>"GDPR"</strong> means the General Data Protection Regulation (EU) 2016/679</li>
            <li><strong>"Personal Data"</strong> means any information relating to an identified or identifiable natural person</li>
            <li><strong>"Processing"</strong> means any operation performed on Personal Data</li>
            <li><strong>"Data Subject"</strong> means the individual whose Personal Data is processed</li>
        </ul>
    </div>

    <div class="section">
        <h2>4. Processing Details</h2>
        <p><strong>Purpose of Processing:</strong> {{1.processing_purposes}}</p>
        <p><strong>Types of Personal Data:</strong> {{1.data}}</p>
        <p><strong>Categories of Data Subjects:</strong> {{1.data_subjects}}</p>
        <p><strong>Duration:</strong> For the term of the services agreement</p>
    </div>

    <div class="section">
        <h2>5. Processor Obligations</h2>
        <p>The Data Processor agrees to:</p>
        <ul>
            <li>Process Personal Data only on documented instructions from the Data Controller</li>
            <li>Ensure persons authorized to process Personal Data have committed to confidentiality</li>
            <li>Implement appropriate technical and organizational security measures</li>
            <li>Not engage another processor without prior written authorization</li>
            <li>Assist the Data Controller in fulfilling Data Subject rights requests</li>
            <li>Delete or return all Personal Data after processing ends</li>
            <li>Make available all information necessary to demonstrate compliance</li>
        </ul>
    </div>

    <div class="section">
        <h2>6. Security Measures</h2>
        <p><strong>Implemented Security Measures:</strong> {{1.security_measures}}</p>
        <p>The Processor shall implement measures to ensure a level of security appropriate to the risk.</p>
    </div>

    <div class="section">
        <h2>7. Sub-Processing</h2>
        <p><strong>Approved Sub-Processors:</strong> {{1.thirdparty}}</p>
        <p>The Processor shall not engage another processor without prior specific or general written authorization of the Controller.</p>
    </div>

    <div class="section">
        <h2>8. International Transfers</h2>
        <p><strong>Transfer Status:</strong> {{1.international_transfers}}</p>
        <p><strong>Transfer Countries:</strong> {{1.transfer_countries}}</p>
        <p>Any transfer outside the EEA shall be subject to appropriate safeguards as required by GDPR.</p>
    </div>

    <div class="section">
        <h2>9. Data Subject Rights</h2>
        <p>The Processor shall assist the Controller in responding to requests from Data Subjects exercising their rights under GDPR.</p>
        <p><strong>Privacy Officer Contact:</strong> {{1.privacy_officer}}</p>
        <p><strong>DPO Contact:</strong> {{1.dpo_name}}</p>
    </div>

    <div class="section">
        <h2>10. Data Breach Notification</h2>
        <p>The Processor shall notify the Controller without undue delay after becoming aware of a personal data breach.</p>
    </div>

    <div class="section">
        <h2>11. Data Retention</h2>
        <p><strong>Retention Period:</strong> {{1.retention_period}}</p>
        <p>At the choice of the Controller, the Processor shall delete or return all Personal Data after the end of the provision of services.</p>
    </div>

    <div class="signature-area">
        <h2>12. Signatures</h2>
        <p>IN WITNESS WHEREOF, this Agreement is entered into as of the date first written above.</p>
        
        <p><strong>DATA CONTROLLER:</strong></p>
        <p>Company: {{1.company}}</p>
        <p>Name: {{1.authorized_signatory}}</p>
        <p>Signature: <span class="signature-line"></span></p>
        <p>Date: <span class="signature-line"></span></p>
        
        <br><br>
        
        <p><strong>DATA PROCESSOR:</strong></p>
        <p>Company: {{1.service_provider_name}}</p>
        <p>Name: <span class="signature-line"></span></p>
        <p>Signature: <span class="signature-line"></span></p>
        <p>Date: <span class="signature-line"></span></p>
    </div>

    <div class="download-section">
        <button class="download-btn" onclick="window.print()">ðŸ“„ Download as PDF</button>
    </div>
</body>
</html>
